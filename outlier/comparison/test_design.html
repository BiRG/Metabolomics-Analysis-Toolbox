<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//ABISOURCE//DTD XHTML plus AWML 2.2//EN" "http://www.abisource.com/2004/xhtml-awml/xhtml-awml.mod">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:awml="http://www.abisource.com/2004/xhtml-awml/">
 <head>
  <!-- ======================================================= -->
  <!-- Created by AbiWord, a free, Open Source wordprocessor.  -->
  <!-- For more information visit http://www.abisource.com.    -->
  <!-- ======================================================= -->
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>test_design.html</title>
  <meta name="Title" content="test_design.html" />
  <style type="text/css">
   <!--
#toc,
.toc,
.mw-warning {
	border: 1px solid #aaa;
	background-color: #f9f9f9;
	padding: 5px;
	font-size: 95%;
}
#toc h2,
.toc h2 {
	display: inline;
	border: none;
	padding: 0;
	font-size: 100%;
	font-weight: bold;
}
#toc #toctitle,
.toc #toctitle,
#toc .toctitle,
.toc .toctitle {
	text-align: center;
}
#toc ul,
.toc ul {
	list-style-type: none;
	list-style-image: none;
	margin-left: 0;
	padding-left: 0;
	text-align: left;
}
#toc ul ul,
.toc ul ul {
	margin: 0 0 0 2em;
}
#toc .toctoggle,
.toc .toctoggle {
	font-size: 94%;
}@media print, projection, embossed {
	body {
		padding-top:1in;
		padding-bottom:1in;
		padding-left:1in;
		padding-right:1in;
	}
}
body {
	font-family:'Liberation Serif';
	font-variant:normal;
	text-indent:0in;
	widows:2;
	font-style:normal;
	font-weight:normal;
	text-decoration:none;
	color:#000000;
	text-align:left;
	font-size:12pt;
}
table {
}
td {
	border-collapse:collapse;
	text-align:left;
	vertical-align:top;
}
p, h1, h2, h3, li {
	color:#000000;
	font-family:'Liberation Serif';
	font-size:12pt;
	text-align:left;
	vertical-align:normal;
}
h1 {
	font-family:'Liberation Sans';
	font-size:17pt;
	font-weight:bold;
	margin-bottom:3pt;
	margin-top:22pt;
	page-break-after:avoid;
}
h2 {
	font-family:'Liberation Sans';
	font-size:14pt;
	font-weight:bold;
	margin-bottom:3pt;
	margin-top:22pt;
	page-break-after:avoid;
}
*.plain_text {
	font-family:'Courier New';
}
     -->
  </style>
 </head>
 <body>
  <div>
   <h1>Tests</h1>
   <h2>Main test routine</h2>
   <p>Maybe the main test routine should be modified for the processing errors (no baseline correction etc) to not allow the corrected and uncorrected version of a sample in the same run.</p>
   <p></p>
   <p class="plain_text">func main_test(inliers, outliers, descriptive_run_parameters) begin</p>
   <p class="plain_text"><span xml:lang="en-US" lang="en-US">&nbsp;//need to keep total sample size the same for results to be comparable&nbsp;</span></p>
   <p class="plain_text"><span xml:lang="en-US" lang="en-US">	//thus fraction_contam rather than using full inliers all the time</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	For fraction_contam in {0 ... 1/4}</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;Repeat 32 times</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;num_inliers = size(inliers)(1-fraction_contam)</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;num_outliers = size(inliers)-num_inliers</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;inlier_spectra=random sample from inliers</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;other_spectra = random sample from outliers</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;For each algorithm</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;For each sensitivity</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;run algorithm on combined </span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predose_spectra and other_spectra</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;record which spectra were flagged and </span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number of false positives, and </span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;false negatives, and</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fraction_contam, and </span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_inliers, and //Not duplicate bec of rounding</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_outliers,</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;algorithm name,</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sensitivity,</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters for run</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;&nbsp;end</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;end</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;end</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	end</span></p>
   <p class="plain_text">end</p>
   <h2>Pre-dose versus other-dose</h2>
   <p>Tests:</p>
   <p>Main distribution is relatively compact</p>
   <p>Sensitivity to distance as given by dose (though I average over all days rather than focusing on day of maximum effect)</p>
   <p></p>
   <p class="plain_text">full_predose_spectra = all rats in the pre-dose condition</p>
   <p class="plain_text">For other_dose in {0 mg/kg ... 100 mg/kg}</p>
   <p class="plain_text">	main_test(full_predose_spectra, non_predose_days_for(other_dose),</p>
   <p class="plain_text">	&nbsp;{&rdquo;predose-vs-other-dose&rdquo;,other_dose})</p>
   <p class="plain_text">end</p>
   <h2><span xml:lang="en-US" lang="en-US">All other doses versus pre-dose</span></h2>
   <p><span xml:lang="en-US" lang="en-US">Tests:</span></p>
   <p dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">Main distribution is non-Gaussian with a definite progression</span></p>
   <p dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">Sensitivity to distance as given by dose (though I average over all days rather than focusing on day of maximum effect)</span></p>
   <p dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p class="plain_text">full_predose_spectra = all rats in the pre-dose condition</p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">For other_dose in {0 mg/kg ... 100 mg/kg and (union of 100 and 50)}</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	main_test(non_predose_days_for(other_dose), full_predose_spectra,</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;{&rdquo;other-dose-vs-predose&rdquo;,other_dose})</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">end</span></p>
   <h2 dir="ltr" style="text-align:left;margin-bottom:0.0417in;margin-top:0.3056in;margin-right:0.0000in">Faulty Baseline-correction testing</h2>
   <p dir="ltr"><span xml:lang="en-US" lang="en-US">Tests:</span></p>
   <p dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">Whether a minor error of leaving out baseline correction will be detected or swamped by noise</span></p>
   <p dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p class="plain_text"><span xml:lang="en-US" lang="en-US">For source_spectra in {predose, high_dose, all_spectra}</span></p>
   <p><span style="font-family:'Courier New'" xml:lang="en-US" lang="en-US">&nbsp;main_test(source_spectra, non_baseline_corrected(source_spectra),</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	{&rdquo;faulty-baseline&rdquo;,source_spectrum_name})</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">end</span></p>
   <h2>Faulty Alignment testing</h2>
   <p><span xml:lang="en-US" lang="en-US">Tests:</span></p>
   <p dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">Whether a more serious error of not aligning to the standard will be detected or swamped by noise</span></p>
   <p dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"></p>
   <p><span style="font-family:'Courier New'" xml:lang="en-US" lang="en-US">For source_spectra in {predose, high_dose, all_spectra}</span></p>
   <p dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span style="font-family:'Courier New'" xml:lang="en-US" lang="en-US">	main_test(source_spectra, non_aligned_corrected(source_spectra),</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	{&rdquo;faulty-alignment&rdquo;,source_spectrum_name})</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">end</span></p>
   <h2>Dimensionality testing</h2>
   <p>Not sure if the resampling provided by binning is really a good test of different dimensionalities. &nbsp;But, if it is, we can repeat the predose test</p>
   <p></p>
   <p><span style="font-family:'Courier New'" xml:lang="en-US" lang="en-US">For bins in {25,50,75,100,125}</span></p>
   <p><span style="font-family:'Courier New'" xml:lang="en-US" lang="en-US">&nbsp;full_predose_spectra = rebin(bins, all rats in the pre-dose condition)</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">&nbsp;For other_dose in {0 mg/kg ... 100 mg/kg}</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;other_spectra=rebin(bins, </span><span xml:lang="en-US" lang="en-US">non_predose_days_for(other_dose)</span><span xml:lang="en-US" lang="en-US">)</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">&nbsp;&nbsp;main_test(full_predose_spectra, other_spectra,</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">	&nbsp;&nbsp;{&rdquo;predose-vs-other-dose-rebinned&rdquo;,other_dose,num_bins})</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">&nbsp;end</span></p>
   <p class="plain_text" dir="ltr" style="text-align:left;margin-bottom:0.0000in;margin-top:0.0000in;margin-right:0.0000in"><span xml:lang="en-US" lang="en-US">end</span></p>
  </div>
 </body>
</html>
